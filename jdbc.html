<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>JDBC - iJDBC by HowToOracle_ES</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header">
						<h1><a href="index.html">Instrumented JDBC</a></h1>
						<nav>
							<a href="#menu">Menu</a>
						</nav>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<div class="inner">
							<h2>Menu</h2>
							<ul class="links">
								<li><a href="index.html">Home</a></li>
								<li><a href="generic.html">Generic</a></li>
								<li><a href="jdbc.html">JDBC</a></li>
								<li><a href="pl-sql.html">PL/SQL</a></li>
								<li><a href="elements.html">Elements</a></li>
							</ul>
							<a href="#" class="close">Close</a>
						</div>
					</nav>

				<!-- Wrapper -->
					<section id="wrapper">
						<header>
							<div class="inner">
								<h2>JDBC</h2>
								<p>Phasellus non pulvinar erat. Fusce tincidunt nisl eget ipsum.</p>
							</div>
						</header>

						<!-- Content -->
							<div class="wrapper">
								<div class="inner">
									<h3 class="major">Using iJDBC</h3>
									<p>First, you must add to application classpath the modules with the utility.</p>

									<h4 class="major">Dependencies management</h4>
									<p>This is an example in <code>Gradle</code></p>
									<pre><code>compile group: 'com.ijdbc', name: 'common', version: '1.0-SNAPSHOT'
compile group: 'com.ijdbc', name: 'oracle', version: '1.0-SNAPSHOT'
</code></pre>
									<p>The <code>oracle</code> module requires classes from the <code>common</code> module, which is in a separated module to abstract from the underlying database.</p>

									<h4 class="major">Defining the instrumentation properties</h4>
									<p>Then, we need to define a POJO with the information we want to provide to the tool:</p>
									<pre><code>JDBCInstrumentation jdbcInstrumentation = new JDBCInstrumentation(
	"actionName", "clientInfo", "moduleName");</code></pre>

									<h4 class="major">Instrument the connection</h4>
									<p>And last, once you get the connection we instrument it like this:</p>
									<pre><code>OracleInstrumentationUtil.instrument(connection, jdbcInstrumentation);</code></pre>

									<h4 class="major">Obtaining a JDBC connection</h4>
									<p>Depending on your application, you get an Oracle connection creating it each time:</p>
									<pre><code>Connection connection = DriverManager.getConnection(
	"jdbc:oracle:thin:@localhost:1521:db","username","password");</code></pre>									
									<p>Or using a connection pool:</p>
									<pre><code>Context ctx = new InitialContext(ht);
OracleDataSource ods = new OracleDataSource();

// Set DataSource properties
ods.setUser("Scott");
ods.setConnectionCachingEnabled(true);    // Turns on caching
ctx.bind("MyDS", ods);
// ...
// Retrieve DataSource from the InitialContext
ods =(OracleDataSource) ctx. lookup("MyDS");

// Transparently create cache and retrieve connection
Connection connection = ods.getConnection();</code></pre>

									<h3 class="major">Wanna do it by yourself?</h3>
									<p>No problem. This is how a Java application using JDBC should instrument the connection whenever is necessary.</p>
									<pre><code>String[] metrics = new String[OracleConnection.END_TO_END_STATE_INDEX_MAX];

metrics[OracleConnection.END_TO_END_CLIENTID_INDEX] = “moises.espinosa.es”;
metrics[OracleConnection.END_TO_END_MODULE_INDEX] = “SessionAttributes.java”;
metrics[OracleConnection.END_TO_END_ACTION_INDEX] = “test session instrumentation”;

((OracleConnection)connection).setEndToEndMetrics(metrics, (short)0);</code></pre>
								</div>
							</div>

					</section>

				<!-- Footer -->
					<section id="footer">
						<div class="inner">
							<h2 class="major">Get in touch</h2>
							<p>Cras mattis ante fermentum, malesuada neque vitae, eleifend erat. Phasellus non pulvinar erat. Fusce tincidunt, nisl eget mattis egestas, purus ipsum consequat orci, sit amet lobortis lorem lacus in tellus. Sed ac elementum arcu. Quisque placerat auctor laoreet.</p>
							<ul class="contact">
								<li class="fa-home"><a href="http://www.howtooracle.es">www.howtooracle.es</a></li>
								<li class="fa-github">Fork us! <a href="https://github.com/mdelapenya/instrumented-jdbc">github.com/mdelapenya/instrumented-jdbc</a></li>
								<li class="fa-twitter"><a href="https://twitter.com/howtooracle_es">@howtooracle_es</a></li>
								<li class="fa-facebook"><a href="https://www.facebook.com/howtooracle.es">howtooracle.es</a></li>
							</ul>
							<ul class="copyright">
								<li>&copy; HowToOracle_ES. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
							</ul>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>